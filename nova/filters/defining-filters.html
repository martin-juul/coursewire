<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Defining Filters | CourseWire Docs</title>
    <meta name="generator" content="VuePress 1.7.1">
    
    <meta name="description" content="Informing about educations">
    <meta name="theme-color" content="#c87f2f">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    
    <link rel="preload" href="/coursewire/assets/css/0.styles.bfc8dd69.css" as="style"><link rel="preload" href="/coursewire/assets/js/app.02511102.js" as="script"><link rel="preload" href="/coursewire/assets/js/2.fbd24a80.js" as="script"><link rel="preload" href="/coursewire/assets/js/31.9e2127cc.js" as="script"><link rel="prefetch" href="/coursewire/assets/js/10.4212c2f9.js"><link rel="prefetch" href="/coursewire/assets/js/11.3c48ff1c.js"><link rel="prefetch" href="/coursewire/assets/js/12.8c4af0eb.js"><link rel="prefetch" href="/coursewire/assets/js/13.bf842588.js"><link rel="prefetch" href="/coursewire/assets/js/14.37b2191d.js"><link rel="prefetch" href="/coursewire/assets/js/15.c876d26f.js"><link rel="prefetch" href="/coursewire/assets/js/16.073345a7.js"><link rel="prefetch" href="/coursewire/assets/js/17.e24f1dd7.js"><link rel="prefetch" href="/coursewire/assets/js/18.8bfdb26b.js"><link rel="prefetch" href="/coursewire/assets/js/19.ffc8cf96.js"><link rel="prefetch" href="/coursewire/assets/js/20.36a0871b.js"><link rel="prefetch" href="/coursewire/assets/js/21.35f26c2d.js"><link rel="prefetch" href="/coursewire/assets/js/22.e5eca7c6.js"><link rel="prefetch" href="/coursewire/assets/js/23.585f7050.js"><link rel="prefetch" href="/coursewire/assets/js/24.1eb91c63.js"><link rel="prefetch" href="/coursewire/assets/js/25.b87544a9.js"><link rel="prefetch" href="/coursewire/assets/js/26.ca38d820.js"><link rel="prefetch" href="/coursewire/assets/js/27.cdd47a7e.js"><link rel="prefetch" href="/coursewire/assets/js/28.910457fd.js"><link rel="prefetch" href="/coursewire/assets/js/29.c1ae8d42.js"><link rel="prefetch" href="/coursewire/assets/js/3.8bf11098.js"><link rel="prefetch" href="/coursewire/assets/js/30.5cc41175.js"><link rel="prefetch" href="/coursewire/assets/js/32.5397ea66.js"><link rel="prefetch" href="/coursewire/assets/js/33.45080a30.js"><link rel="prefetch" href="/coursewire/assets/js/34.6e3f0c23.js"><link rel="prefetch" href="/coursewire/assets/js/35.ddd28f5a.js"><link rel="prefetch" href="/coursewire/assets/js/36.bfb957fe.js"><link rel="prefetch" href="/coursewire/assets/js/37.52edfd39.js"><link rel="prefetch" href="/coursewire/assets/js/38.0c7c9bb2.js"><link rel="prefetch" href="/coursewire/assets/js/39.134dd667.js"><link rel="prefetch" href="/coursewire/assets/js/4.c93ddc9d.js"><link rel="prefetch" href="/coursewire/assets/js/40.0321689a.js"><link rel="prefetch" href="/coursewire/assets/js/41.685503da.js"><link rel="prefetch" href="/coursewire/assets/js/42.73b1c1d1.js"><link rel="prefetch" href="/coursewire/assets/js/43.ff4aa68f.js"><link rel="prefetch" href="/coursewire/assets/js/44.2cb09a15.js"><link rel="prefetch" href="/coursewire/assets/js/45.9071b634.js"><link rel="prefetch" href="/coursewire/assets/js/46.691acbad.js"><link rel="prefetch" href="/coursewire/assets/js/47.09900fe0.js"><link rel="prefetch" href="/coursewire/assets/js/48.31c05462.js"><link rel="prefetch" href="/coursewire/assets/js/49.3eb88337.js"><link rel="prefetch" href="/coursewire/assets/js/5.acf75b03.js"><link rel="prefetch" href="/coursewire/assets/js/50.be69d7ce.js"><link rel="prefetch" href="/coursewire/assets/js/51.d6025ff9.js"><link rel="prefetch" href="/coursewire/assets/js/52.afab6d12.js"><link rel="prefetch" href="/coursewire/assets/js/6.a7a1e44e.js"><link rel="prefetch" href="/coursewire/assets/js/7.cf5f8500.js"><link rel="prefetch" href="/coursewire/assets/js/8.80f7340e.js"><link rel="prefetch" href="/coursewire/assets/js/9.749dd9d2.js">
    <link rel="stylesheet" href="/coursewire/assets/css/0.styles.bfc8dd69.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/coursewire/" class="home-link router-link-active"><!----> <span class="site-name">CourseWire Docs</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/coursewire/specification/" class="nav-link">
  Specification
</a></div><div class="nav-item"><a href="/coursewire/setup/" class="nav-link">
  Setup
</a></div><div class="nav-item"><a href="/coursewire/style-guide/" class="nav-link">
  Style guide
</a></div><div class="nav-item"><a href="/coursewire/nova/" class="nav-link router-link-active">
  Nova
</a></div><div class="nav-item"><a href="/coursewire/forge/" class="nav-link">
  Forge
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/coursewire/specification/" class="nav-link">
  Specification
</a></div><div class="nav-item"><a href="/coursewire/setup/" class="nav-link">
  Setup
</a></div><div class="nav-item"><a href="/coursewire/style-guide/" class="nav-link">
  Style guide
</a></div><div class="nav-item"><a href="/coursewire/nova/" class="nav-link router-link-active">
  Nova
</a></div><div class="nav-item"><a href="/coursewire/forge/" class="nav-link">
  Forge
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Nova</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/coursewire/nova/" aria-current="page" class="sidebar-link">Laravel Nova</a></li><li><a href="/coursewire/nova/actions/defining-actions.html" class="sidebar-link">Defining Actions</a></li><li><a href="/coursewire/nova/actions/registering-actions.html" class="sidebar-link">Registering Actions</a></li><li><a href="/coursewire/nova/customization/assets.html" class="sidebar-link">Assets</a></li><li><a href="/coursewire/nova/customization/cards.html" class="sidebar-link">Cards</a></li><li><a href="/coursewire/nova/customization/dashboards.html" class="sidebar-link">Dashboards</a></li><li><a href="/coursewire/nova/customization/fields.html" class="sidebar-link">Fields</a></li><li><a href="/coursewire/nova/customization/frontend.html" class="sidebar-link">CSS / JavaScript</a></li><li><a href="/coursewire/nova/customization/localization.html" class="sidebar-link">Localization</a></li><li><a href="/coursewire/nova/customization/resource-tools.html" class="sidebar-link">Resource Tools</a></li><li><a href="/coursewire/nova/customization/stubs.html" class="sidebar-link">Stubs</a></li><li><a href="/coursewire/nova/customization/themes.html" class="sidebar-link">Themes</a></li><li><a href="/coursewire/nova/customization/tools.html" class="sidebar-link">Tools</a></li><li><a href="/coursewire/nova/dashboard/metrics.html" class="sidebar-link">Metrics</a></li><li><a href="/coursewire/nova/dashboard/tools.html" class="sidebar-link">Tools</a></li><li><a href="/coursewire/nova/filters/defining-filters.html" aria-current="page" class="active sidebar-link">Defining Filters</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/coursewire/nova/filters/defining-filters.html#select-filters" class="sidebar-link">Select Filters</a></li><li class="sidebar-sub-header"><a href="/coursewire/nova/filters/defining-filters.html#boolean-filters" class="sidebar-link">Boolean Filters</a></li><li class="sidebar-sub-header"><a href="/coursewire/nova/filters/defining-filters.html#date-filters" class="sidebar-link">Date Filters</a></li><li class="sidebar-sub-header"><a href="/coursewire/nova/filters/defining-filters.html#filter-titles" class="sidebar-link">Filter Titles</a></li><li class="sidebar-sub-header"><a href="/coursewire/nova/filters/defining-filters.html#filter-default-values" class="sidebar-link">Filter Default Values</a></li><li class="sidebar-sub-header"><a href="/coursewire/nova/filters/defining-filters.html#dynamic-filters" class="sidebar-link">Dynamic Filters</a></li></ul></li><li><a href="/coursewire/nova/filters/registering-filters.html" class="sidebar-link">Registering Filters</a></li><li><a href="/coursewire/nova/lenses/defining-lenses.html" class="sidebar-link">Defining Lenses</a></li><li><a href="/coursewire/nova/lenses/registering-lenses.html" class="sidebar-link">Registering Lenses</a></li><li><a href="/coursewire/nova/metrics/defining-metrics.html" class="sidebar-link">Defining Metrics</a></li><li><a href="/coursewire/nova/metrics/registering-metrics.html" class="sidebar-link">Registering Metrics</a></li><li><a href="/coursewire/nova/nova-js/" class="sidebar-link">Overview</a></li><li><a href="/coursewire/nova/nova-js/event-bus.html" class="sidebar-link">Event Bus</a></li><li><a href="/coursewire/nova/nova-js/methods.html" class="sidebar-link">Methods</a></li><li><a href="/coursewire/nova/nova-js/properties.html" class="sidebar-link">Properties</a></li><li><a href="/coursewire/nova/resources/" class="sidebar-link">The Basics</a></li><li><a href="/coursewire/nova/resources/authorization.html" class="sidebar-link">Authorization</a></li><li><a href="/coursewire/nova/resources/date-fields.html" class="sidebar-link">Date Fields</a></li><li><a href="/coursewire/nova/resources/fields.html" class="sidebar-link">Fields</a></li><li><a href="/coursewire/nova/resources/file-fields.html" class="sidebar-link">File Fields</a></li><li><a href="/coursewire/nova/resources/relationships.html" class="sidebar-link">Relationships</a></li><li><a href="/coursewire/nova/resources/validation.html" class="sidebar-link">Validation</a></li><li><a href="/coursewire/nova/search/global-search.html" class="sidebar-link">Global Search</a></li><li><a href="/coursewire/nova/search/scout-integration.html" class="sidebar-link">Scout Integration</a></li><li><a href="/coursewire/nova/installation.html" class="sidebar-link">Installation</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="defining-filters"><a href="#defining-filters" class="header-anchor">#</a> Defining Filters</h1> <p></p><div class="table-of-contents"><ul><li><a href="#select-filters">Select Filters</a></li><li><a href="#boolean-filters">Boolean Filters</a></li><li><a href="#date-filters">Date Filters</a></li><li><a href="#filter-titles">Filter Titles</a></li><li><a href="#filter-default-values">Filter Default Values</a></li><li><a href="#dynamic-filters">Dynamic Filters</a></li></ul></div><p></p> <p>Nova filters allow you to scope your Nova index queries with custom conditions. For example, you may wish to define a filter to quickly view &quot;Admin&quot; users within your application:</p> <p><img src="img/filters.png" alt="Filters"></p> <h2 id="select-filters"><a href="#select-filters" class="header-anchor">#</a> Select Filters</h2> <p>The most common type of Nova filter is the &quot;select&quot; filter, which allows the user to select a filter option from a drop-down selection menu. You may generate a select filter using the <code>nova:filter</code> Artisan command. By default, Nova will place newly generated filters in the <code>app/Nova/Filters</code> directory:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>php artisan nova:filter UserType
</code></pre></div><p>Each select filter generated by Nova contains two methods: <code>apply</code> and <code>options</code>. The <code>apply</code> method is responsible for modifying the query to achieve the desired filter state, while the <code>options</code> method defines the &quot;values&quot; the filter may have. Let's take a look at an example <code>UserType</code> filter:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token keyword">namespace</span> <span class="token package">App<span class="token punctuation">\</span>Nova<span class="token punctuation">\</span>Filters</span><span class="token punctuation">;</span>

<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Http<span class="token punctuation">\</span>Request</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Laravel<span class="token punctuation">\</span>Nova<span class="token punctuation">\</span>Filters<span class="token punctuation">\</span>Filter</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">UserType</span> <span class="token keyword">extends</span> <span class="token class-name">Filter</span>
<span class="token punctuation">{</span>
    <span class="token comment">/**
     * Apply the filter to the given query.
     *
     * @param  \Illuminate\Http\Request  $request
     * @param  \Illuminate\Database\Eloquent\Builder  $query
     * @param  mixed  $value
     * @return \Illuminate\Database\Eloquent\Builder
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">apply</span><span class="token punctuation">(</span>Request <span class="token variable">$request</span><span class="token punctuation">,</span> <span class="token variable">$query</span><span class="token punctuation">,</span> <span class="token variable">$value</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token variable">$query</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'type'</span><span class="token punctuation">,</span> <span class="token variable">$value</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * Get the filter's available options.
     *
     * @param  \Illuminate\Http\Request  $request
     * @return array
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">options</span><span class="token punctuation">(</span>Request <span class="token variable">$request</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">[</span>
            <span class="token single-quoted-string string">'Administrator'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'admin'</span><span class="token punctuation">,</span>
            <span class="token single-quoted-string string">'Editor'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'editor'</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></code></pre></div><p>The <code>options</code> method should return an array of keys and values. The array's keys will be used as the &quot;human-friendly&quot; text that will be displayed in the Nova UI. The array's values will be passed into the <code>apply</code> method as the <code>$value</code> argument. This filter defines two possible values: <code>admin</code> and <code>editor</code>.</p> <p>As you can see in the example above, you may leverage the incoming <code>$value</code> to modify your query. The <code>apply</code> method should return the modified query instance.</p> <h2 id="boolean-filters"><a href="#boolean-filters" class="header-anchor">#</a> Boolean Filters</h2> <p>Nova also supports &quot;boolean&quot; filters, which allows the user to select multiple filter option using a list of check-boxes.</p> <p><img src="img/boolean-filter.png" alt="Boolean Filter"></p> <p>You may generate a boolean filter using the <code>nova:filter --boolean</code> Artisan command. By default, Nova will place newly generated filters in the <code>app/Nova/Filters</code> directory:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>php artisan nova:filter UserType --boolean
</code></pre></div><p>Each boolean filter generated by Nova contains two methods: <code>apply</code> and <code>options</code>. The <code>apply</code> method is responsible for modifying the query to achieve the desired filter state, while the options method defines the &quot;values&quot; the filter may have.</p> <p>When building boolean filters, the <code>$value</code> argument passed to the <code>apply</code> method is an associative array containing the boolean value of each of your filter's options.</p> <p>Let's take a look at an example <code>UserType</code> filter:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token keyword">namespace</span> <span class="token package">App<span class="token punctuation">\</span>Nova<span class="token punctuation">\</span>Filters</span><span class="token punctuation">;</span>

<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Http<span class="token punctuation">\</span>Request</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Laravel<span class="token punctuation">\</span>Nova<span class="token punctuation">\</span>Filters<span class="token punctuation">\</span>BooleanFilter</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">UserType</span> <span class="token keyword">extends</span> <span class="token class-name">BooleanFilter</span>
<span class="token punctuation">{</span>
    <span class="token comment">/**
     * Apply the filter to the given query.
     *
     * @param  \Illuminate\Http\Request  $request
     * @param  \Illuminate\Database\Eloquent\Builder  $query
     * @param  mixed  $value
     * @return \Illuminate\Database\Eloquent\Builder
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">apply</span><span class="token punctuation">(</span>Request <span class="token variable">$request</span><span class="token punctuation">,</span> <span class="token variable">$query</span><span class="token punctuation">,</span> <span class="token variable">$value</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token comment">// dump($value);</span>
        <span class="token comment">// ['admin' =&gt; true/false, 'editor' =&gt; true/false]</span>

        <span class="token keyword">return</span> <span class="token variable">$query</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'is_admin'</span><span class="token punctuation">,</span> <span class="token variable">$value</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'admin'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
                     <span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'is_editor'</span><span class="token punctuation">,</span> <span class="token variable">$value</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'editor'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * Get the filter's available options.
     *
     * @param  \Illuminate\Http\Request  $request
     * @return array
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">options</span><span class="token punctuation">(</span>Request <span class="token variable">$request</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">[</span>
            <span class="token single-quoted-string string">'Administrator'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'admin'</span><span class="token punctuation">,</span>
            <span class="token single-quoted-string string">'Editor'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'editor'</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></code></pre></div><p>The <code>options</code> method should return an array of keys and values. The array's keys will be used as the &quot;human-friendly&quot; text that will be displayed in the Nova UI. The array's values will be passed into the <code>apply</code> method as the <code>$value</code> argument. This filter defines two possible values: <code>admin</code> and <code>editor</code>.</p> <p>As you can see in the example above, you may leverage the incoming <code>$value</code> to modify your query. The <code>apply</code> method should return the modified query instance.</p> <h2 id="date-filters"><a href="#date-filters" class="header-anchor">#</a> Date Filters</h2> <p>Nova also supports &quot;date&quot; filters, which allows the user to select the filter's value via a date selection calendar.</p> <p><img src="img/date-filter.png" alt="Date Filter"></p> <p>You may generate a date filter using the <code>nova:filter --date</code> Artisan command. By default, Nova will place newly generated filters in the <code>app/Nova/Filters</code> directory:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>php artisan nova:filter BirthdayFilter --date
</code></pre></div><p>Each date filter generated by Nova contains one method: <code>apply</code>. The <code>apply</code> method is responsible for modifying the query to achieve the desired filter state.</p> <p>When building date filters, the <code>$value</code> argument passed to the <code>apply</code> method is the string representation of the selected date.</p> <p>Let's take a look at an example <code>BirthdayFilter</code> filter:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token keyword">namespace</span> <span class="token package">App<span class="token punctuation">\</span>Nova<span class="token punctuation">\</span>Filters</span><span class="token punctuation">;</span>

<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Http<span class="token punctuation">\</span>Request</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Support<span class="token punctuation">\</span>Carbon</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Laravel<span class="token punctuation">\</span>Nova<span class="token punctuation">\</span>Filters<span class="token punctuation">\</span>DateFilter</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">BirthdayFilter</span> <span class="token keyword">extends</span> <span class="token class-name">DateFilter</span>
<span class="token punctuation">{</span>
    <span class="token comment">/**
     * Apply the filter to the given query.
     *
     * @param  \Illuminate\Http\Request  $request
     * @param  \Illuminate\Database\Eloquent\Builder  $query
     * @param  mixed  $value
     * @return \Illuminate\Database\Eloquent\Builder
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">apply</span><span class="token punctuation">(</span>Request <span class="token variable">$request</span><span class="token punctuation">,</span> <span class="token variable">$query</span><span class="token punctuation">,</span> <span class="token variable">$value</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token variable">$query</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'birthday'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'&lt;='</span><span class="token punctuation">,</span> Carbon<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token variable">$value</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></code></pre></div><p>As you can see in the example above, you may leverage the incoming <code>$value</code> to modify your query. The <code>apply</code> method should return the modified query instance.</p> <h2 id="filter-titles"><a href="#filter-titles" class="header-anchor">#</a> Filter Titles</h2> <p>If you would like to change the filter title that is displayed in Nova's filter selection menu, you may define a <code>name</code> property on the filter class:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token comment">/**
 * The displayable name of the filter.
 *
 * @var string
 */</span>
<span class="token keyword">public</span> <span class="token variable">$name</span> <span class="token operator">=</span> <span class="token single-quoted-string string">'Filter Title'</span><span class="token punctuation">;</span>
</code></pre></div><p>If the name of your filter needs to be dynamic, you should create a <code>name</code> method on the filter class:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token comment">/**
 * Get the displayable name of the filter.
 *
 * @return string
 */</span>
<span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">name</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token single-quoted-string string">'Filter By '</span><span class="token punctuation">.</span><span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token property">customProperty</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="filter-default-values"><a href="#filter-default-values" class="header-anchor">#</a> Filter Default Values</h2> <p>If you would like to set the default value of a filter, you may define a <code>default</code> method on the filter class:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token comment">/**
 * The default value of the filter.
 *
 * @var string
 */</span>
<span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token keyword">default</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token boolean constant">true</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="dynamic-filters"><a href="#dynamic-filters" class="header-anchor">#</a> Dynamic Filters</h2> <p>There may be times when you want to create a dynamic filter which filters on different columns. In addition to passing the column name that we want to filter on in the constructor, we'll also need to override the <code>key</code> method so that Nova runs the correct version of the filter. Let's take a look at an example <code>TimestampFilter</code> filter:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token keyword">namespace</span> <span class="token package">App<span class="token punctuation">\</span>Nova<span class="token punctuation">\</span>Filters</span><span class="token punctuation">;</span>

<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Http<span class="token punctuation">\</span>Request</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Support<span class="token punctuation">\</span>Carbon</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Laravel<span class="token punctuation">\</span>Nova<span class="token punctuation">\</span>Filters<span class="token punctuation">\</span>DateFilter</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">TimestampFilter</span> <span class="token keyword">extends</span> <span class="token class-name">DateFilter</span>
<span class="token punctuation">{</span>
    <span class="token comment">/**
     * The column that should be filtered on.
     *
     * @var string
     */</span>
    <span class="token keyword">protected</span> <span class="token variable">$column</span><span class="token punctuation">;</span>

    <span class="token comment">/**
     * Create a new filter instance.
     *
     * @param  string  $column
     * @return void
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">__construct</span><span class="token punctuation">(</span><span class="token variable">$column</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token property">column</span> <span class="token operator">=</span> <span class="token variable">$column</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * Apply the filter to the given query.
     *
     * @param  \Illuminate\Http\Request  $request
     * @param  \Illuminate\Database\Eloquent\Builder  $query
     * @param  mixed  $value
     * @return \Illuminate\Database\Eloquent\Builder
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">apply</span><span class="token punctuation">(</span>Request <span class="token variable">$request</span><span class="token punctuation">,</span> <span class="token variable">$query</span><span class="token punctuation">,</span> <span class="token variable">$value</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token variable">$query</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token property">column</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'&lt;='</span><span class="token punctuation">,</span> Carbon<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token variable">$value</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * Get the key for the filter.
     *
     * @return string
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">key</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token single-quoted-string string">'timestamp_'</span><span class="token punctuation">.</span><span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token property">column</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></code></pre></div><p>When registering the filter on a resource, pass the name of the column you wish to filter on:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token comment">/**
 * Get the filters available for the resource.
 *
 * @param  \Illuminate\Http\Request  $request
 * @return array
 */</span>
<span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">filters</span><span class="token punctuation">(</span>Request <span class="token variable">$request</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">[</span>
        <span class="token keyword">new</span> <span class="token class-name">Filters<span class="token punctuation">\</span>TimestampFilter</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'created_at'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token keyword">new</span> <span class="token class-name">Filters<span class="token punctuation">\</span>TimestampFilter</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'deleted_at'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">11/24/2020, 11:08:49 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/coursewire/nova/dashboard/tools.html" class="prev">
        Tools
      </a></span> <span class="next"><a href="/coursewire/nova/filters/registering-filters.html">
        Registering Filters
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/coursewire/assets/js/app.02511102.js" defer></script><script src="/coursewire/assets/js/2.fbd24a80.js" defer></script><script src="/coursewire/assets/js/31.9e2127cc.js" defer></script>
  </body>
</html>
