<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Registering Metrics | CourseWire Docs</title>
    <meta name="generator" content="VuePress 1.7.1">
    
    <meta name="description" content="Informing about educations">
    <meta name="theme-color" content="#c87f2f">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    
    <link rel="preload" href="/coursewire/assets/css/0.styles.bfc8dd69.css" as="style"><link rel="preload" href="/coursewire/assets/js/app.02511102.js" as="script"><link rel="preload" href="/coursewire/assets/js/2.fbd24a80.js" as="script"><link rel="preload" href="/coursewire/assets/js/37.52edfd39.js" as="script"><link rel="prefetch" href="/coursewire/assets/js/10.4212c2f9.js"><link rel="prefetch" href="/coursewire/assets/js/11.3c48ff1c.js"><link rel="prefetch" href="/coursewire/assets/js/12.8c4af0eb.js"><link rel="prefetch" href="/coursewire/assets/js/13.bf842588.js"><link rel="prefetch" href="/coursewire/assets/js/14.37b2191d.js"><link rel="prefetch" href="/coursewire/assets/js/15.c876d26f.js"><link rel="prefetch" href="/coursewire/assets/js/16.073345a7.js"><link rel="prefetch" href="/coursewire/assets/js/17.e24f1dd7.js"><link rel="prefetch" href="/coursewire/assets/js/18.8bfdb26b.js"><link rel="prefetch" href="/coursewire/assets/js/19.ffc8cf96.js"><link rel="prefetch" href="/coursewire/assets/js/20.36a0871b.js"><link rel="prefetch" href="/coursewire/assets/js/21.35f26c2d.js"><link rel="prefetch" href="/coursewire/assets/js/22.e5eca7c6.js"><link rel="prefetch" href="/coursewire/assets/js/23.585f7050.js"><link rel="prefetch" href="/coursewire/assets/js/24.1eb91c63.js"><link rel="prefetch" href="/coursewire/assets/js/25.b87544a9.js"><link rel="prefetch" href="/coursewire/assets/js/26.ca38d820.js"><link rel="prefetch" href="/coursewire/assets/js/27.cdd47a7e.js"><link rel="prefetch" href="/coursewire/assets/js/28.910457fd.js"><link rel="prefetch" href="/coursewire/assets/js/29.c1ae8d42.js"><link rel="prefetch" href="/coursewire/assets/js/3.8bf11098.js"><link rel="prefetch" href="/coursewire/assets/js/30.5cc41175.js"><link rel="prefetch" href="/coursewire/assets/js/31.9e2127cc.js"><link rel="prefetch" href="/coursewire/assets/js/32.5397ea66.js"><link rel="prefetch" href="/coursewire/assets/js/33.45080a30.js"><link rel="prefetch" href="/coursewire/assets/js/34.6e3f0c23.js"><link rel="prefetch" href="/coursewire/assets/js/35.ddd28f5a.js"><link rel="prefetch" href="/coursewire/assets/js/36.bfb957fe.js"><link rel="prefetch" href="/coursewire/assets/js/38.0c7c9bb2.js"><link rel="prefetch" href="/coursewire/assets/js/39.134dd667.js"><link rel="prefetch" href="/coursewire/assets/js/4.c93ddc9d.js"><link rel="prefetch" href="/coursewire/assets/js/40.0321689a.js"><link rel="prefetch" href="/coursewire/assets/js/41.685503da.js"><link rel="prefetch" href="/coursewire/assets/js/42.73b1c1d1.js"><link rel="prefetch" href="/coursewire/assets/js/43.ff4aa68f.js"><link rel="prefetch" href="/coursewire/assets/js/44.2cb09a15.js"><link rel="prefetch" href="/coursewire/assets/js/45.9071b634.js"><link rel="prefetch" href="/coursewire/assets/js/46.691acbad.js"><link rel="prefetch" href="/coursewire/assets/js/47.09900fe0.js"><link rel="prefetch" href="/coursewire/assets/js/48.31c05462.js"><link rel="prefetch" href="/coursewire/assets/js/49.3eb88337.js"><link rel="prefetch" href="/coursewire/assets/js/5.acf75b03.js"><link rel="prefetch" href="/coursewire/assets/js/50.be69d7ce.js"><link rel="prefetch" href="/coursewire/assets/js/51.d6025ff9.js"><link rel="prefetch" href="/coursewire/assets/js/52.afab6d12.js"><link rel="prefetch" href="/coursewire/assets/js/6.a7a1e44e.js"><link rel="prefetch" href="/coursewire/assets/js/7.cf5f8500.js"><link rel="prefetch" href="/coursewire/assets/js/8.80f7340e.js"><link rel="prefetch" href="/coursewire/assets/js/9.749dd9d2.js">
    <link rel="stylesheet" href="/coursewire/assets/css/0.styles.bfc8dd69.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/coursewire/" class="home-link router-link-active"><!----> <span class="site-name">CourseWire Docs</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/coursewire/specification/" class="nav-link">
  Specification
</a></div><div class="nav-item"><a href="/coursewire/setup/" class="nav-link">
  Setup
</a></div><div class="nav-item"><a href="/coursewire/style-guide/" class="nav-link">
  Style guide
</a></div><div class="nav-item"><a href="/coursewire/nova/" class="nav-link router-link-active">
  Nova
</a></div><div class="nav-item"><a href="/coursewire/forge/" class="nav-link">
  Forge
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/coursewire/specification/" class="nav-link">
  Specification
</a></div><div class="nav-item"><a href="/coursewire/setup/" class="nav-link">
  Setup
</a></div><div class="nav-item"><a href="/coursewire/style-guide/" class="nav-link">
  Style guide
</a></div><div class="nav-item"><a href="/coursewire/nova/" class="nav-link router-link-active">
  Nova
</a></div><div class="nav-item"><a href="/coursewire/forge/" class="nav-link">
  Forge
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Nova</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/coursewire/nova/" aria-current="page" class="sidebar-link">Laravel Nova</a></li><li><a href="/coursewire/nova/actions/defining-actions.html" class="sidebar-link">Defining Actions</a></li><li><a href="/coursewire/nova/actions/registering-actions.html" class="sidebar-link">Registering Actions</a></li><li><a href="/coursewire/nova/customization/assets.html" class="sidebar-link">Assets</a></li><li><a href="/coursewire/nova/customization/cards.html" class="sidebar-link">Cards</a></li><li><a href="/coursewire/nova/customization/dashboards.html" class="sidebar-link">Dashboards</a></li><li><a href="/coursewire/nova/customization/fields.html" class="sidebar-link">Fields</a></li><li><a href="/coursewire/nova/customization/frontend.html" class="sidebar-link">CSS / JavaScript</a></li><li><a href="/coursewire/nova/customization/localization.html" class="sidebar-link">Localization</a></li><li><a href="/coursewire/nova/customization/resource-tools.html" class="sidebar-link">Resource Tools</a></li><li><a href="/coursewire/nova/customization/stubs.html" class="sidebar-link">Stubs</a></li><li><a href="/coursewire/nova/customization/themes.html" class="sidebar-link">Themes</a></li><li><a href="/coursewire/nova/customization/tools.html" class="sidebar-link">Tools</a></li><li><a href="/coursewire/nova/dashboard/metrics.html" class="sidebar-link">Metrics</a></li><li><a href="/coursewire/nova/dashboard/tools.html" class="sidebar-link">Tools</a></li><li><a href="/coursewire/nova/filters/defining-filters.html" class="sidebar-link">Defining Filters</a></li><li><a href="/coursewire/nova/filters/registering-filters.html" class="sidebar-link">Registering Filters</a></li><li><a href="/coursewire/nova/lenses/defining-lenses.html" class="sidebar-link">Defining Lenses</a></li><li><a href="/coursewire/nova/lenses/registering-lenses.html" class="sidebar-link">Registering Lenses</a></li><li><a href="/coursewire/nova/metrics/defining-metrics.html" class="sidebar-link">Defining Metrics</a></li><li><a href="/coursewire/nova/metrics/registering-metrics.html" aria-current="page" class="active sidebar-link">Registering Metrics</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/coursewire/nova/metrics/registering-metrics.html#resource-detail-metrics" class="sidebar-link">Resource Detail Metrics</a></li><li class="sidebar-sub-header"><a href="/coursewire/nova/metrics/registering-metrics.html#dashboard-metrics" class="sidebar-link">Dashboard Metrics</a></li><li class="sidebar-sub-header"><a href="/coursewire/nova/metrics/registering-metrics.html#metric-defaults" class="sidebar-link">Metric Defaults</a></li><li class="sidebar-sub-header"><a href="/coursewire/nova/metrics/registering-metrics.html#metric-sizes" class="sidebar-link">Metric Sizes</a></li><li class="sidebar-sub-header"><a href="/coursewire/nova/metrics/registering-metrics.html#metric-help-tooltips" class="sidebar-link">Metric Help / Tooltips</a></li><li class="sidebar-sub-header"><a href="/coursewire/nova/metrics/registering-metrics.html#authorization" class="sidebar-link">Authorization</a></li></ul></li><li><a href="/coursewire/nova/nova-js/" class="sidebar-link">Overview</a></li><li><a href="/coursewire/nova/nova-js/event-bus.html" class="sidebar-link">Event Bus</a></li><li><a href="/coursewire/nova/nova-js/methods.html" class="sidebar-link">Methods</a></li><li><a href="/coursewire/nova/nova-js/properties.html" class="sidebar-link">Properties</a></li><li><a href="/coursewire/nova/resources/" class="sidebar-link">The Basics</a></li><li><a href="/coursewire/nova/resources/authorization.html" class="sidebar-link">Authorization</a></li><li><a href="/coursewire/nova/resources/date-fields.html" class="sidebar-link">Date Fields</a></li><li><a href="/coursewire/nova/resources/fields.html" class="sidebar-link">Fields</a></li><li><a href="/coursewire/nova/resources/file-fields.html" class="sidebar-link">File Fields</a></li><li><a href="/coursewire/nova/resources/relationships.html" class="sidebar-link">Relationships</a></li><li><a href="/coursewire/nova/resources/validation.html" class="sidebar-link">Validation</a></li><li><a href="/coursewire/nova/search/global-search.html" class="sidebar-link">Global Search</a></li><li><a href="/coursewire/nova/search/scout-integration.html" class="sidebar-link">Scout Integration</a></li><li><a href="/coursewire/nova/installation.html" class="sidebar-link">Installation</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="registering-metrics"><a href="#registering-metrics" class="header-anchor">#</a> Registering Metrics</h1> <p></p><div class="table-of-contents"><ul><li><a href="#resource-detail-metrics">Resource Detail Metrics</a></li><li><a href="#dashboard-metrics">Dashboard Metrics</a></li><li><a href="#metric-defaults">Metric Defaults</a></li><li><a href="#metric-sizes">Metric Sizes</a></li><li><a href="#metric-help-tooltips">Metric Help / Tooltips</a></li><li><a href="#authorization">Authorization</a></li></ul></div><p></p> <p>Once you have defined a metric, you are ready to attach it to a resource. Each resource generated by Nova contains a <code>cards</code> method. To attach a metric to a resource, you should simply add it to the array of metrics / cards returned by this method:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">use</span> <span class="token package">App<span class="token punctuation">\</span>Nova<span class="token punctuation">\</span>Metrics<span class="token punctuation">\</span>UsersPerDay</span><span class="token punctuation">;</span>

<span class="token comment">/**
 * Get the cards available for the resource.
 *
 * @param  \Illuminate\Http\Request  $request
 * @return array
 */</span>
<span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">cards</span><span class="token punctuation">(</span>Request <span class="token variable">$request</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">[</span>
        <span class="token keyword">new</span> <span class="token class-name">UsersPerDay</span>
    <span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Alternatively, you may use the <code>make</code> method to instantiate your metric:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">use</span> <span class="token package">App<span class="token punctuation">\</span>Nova<span class="token punctuation">\</span>Metrics<span class="token punctuation">\</span>UsersPerDay</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">cards</span><span class="token punctuation">(</span>Request <span class="token variable">$request</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">[</span>
        UsersPerDay<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Any arguments passed to the <code>make</code> method will be passed to the constructor of your metric.</p> <h2 id="resource-detail-metrics"><a href="#resource-detail-metrics" class="header-anchor">#</a> Resource Detail Metrics</h2> <p>In addition to placing metrics on the resource index screen, you may also attach a metric to the resource detail screen. For example, if you are building a podcasting application, you may wish to display the total number of podcasts created by users over time. To instruct a metric to be displayed on the detail page instead of the index page, chain the <code>onlyOnDetail</code> method onto your metric registration:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token comment">/**
 * Get the cards available for the request.
 *
 * @param  \Illuminate\Http\Request  $request
 * @return array
 */</span>
<span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">cards</span><span class="token punctuation">(</span>Request <span class="token variable">$request</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">[</span>
        <span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Metrics<span class="token punctuation">\</span>PodcastCount</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">onlyOnDetail</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Of course, you will need to modify your metric's query to only gather metric data on the resource for which it is currently being displayed. To accomplish this, your metric's <code>calculate</code> method may access the <code>resourceId</code> property on the incoming <code>$request</code>:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">use</span> <span class="token package">App<span class="token punctuation">\</span>Podcast</span><span class="token punctuation">;</span>

<span class="token keyword">return</span> <span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">count</span><span class="token punctuation">(</span><span class="token variable">$request</span><span class="token punctuation">,</span> Podcast<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'user_id'</span><span class="token punctuation">,</span> <span class="token variable">$request</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token property">resourceId</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="dashboard-metrics"><a href="#dashboard-metrics" class="header-anchor">#</a> Dashboard Metrics</h2> <p>You are not limited to displaying metrics on a resource's index screen. You are free to add metrics to your primary Nova &quot;dashboard&quot;, which is the default page that Nova displays after login. By default, this screen displays some helpful links to the Nova documentation via the built-in <code>Help</code> card. To add a metric to your dashboard, add the metric to the array of cards returned by the <code>cards</code> method of your <code>app/Providers/NovaServiceProvider</code> class:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">use</span> <span class="token package">App<span class="token punctuation">\</span>Nova<span class="token punctuation">\</span>Metrics<span class="token punctuation">\</span>NewUsers</span><span class="token punctuation">;</span>

<span class="token comment">/**
 * Get the cards that should be displayed on the Nova dashboard.
 *
 * @return array
 */</span>
<span class="token keyword">protected</span> <span class="token keyword">function</span> <span class="token function">cards</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">[</span>
        <span class="token keyword">new</span> <span class="token class-name">NewUsers</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="metric-defaults"><a href="#metric-defaults" class="header-anchor">#</a> Metric Defaults</h2> <p>You may wish to initially load a certain range by default. You can pass the range's array key to the <code>defaultRange</code> method on the metric to accomplish this:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">use</span> <span class="token package">App<span class="token punctuation">\</span>Nova<span class="token punctuation">\</span>Metrics<span class="token punctuation">\</span>NewUsers</span><span class="token punctuation">;</span>

<span class="token comment">/**
 * Get the cards that should be displayed on the Nova dashboard.
 *
 * @return array
 */</span>
<span class="token keyword">protected</span> <span class="token keyword">function</span> <span class="token function">cards</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">[</span>
        NewUsers<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">defaultRange</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'YTD'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="metric-sizes"><a href="#metric-sizes" class="header-anchor">#</a> Metric Sizes</h2> <p>By default, metrics take up one-third of the Nova content area. However, you are free to make them larger. To accomplish this, call the <code>width</code> method when registering the metric with a resource:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token comment">/**
 * Get the cards available for the request.
 *
 * @param  \Illuminate\Http\Request  $request
 * @return array
 */</span>
<span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">cards</span><span class="token punctuation">(</span>Request <span class="token variable">$request</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">[</span>
        <span class="token comment">// Two-thirds of the content area...</span>
        <span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Metrics<span class="token punctuation">\</span>UsersPerDay</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">width</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'2/3'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>

        <span class="token comment">// Full width...</span>
        <span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Metrics<span class="token punctuation">\</span>UsersPerDay</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">width</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'full'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="metric-help-tooltips"><a href="#metric-help-tooltips" class="header-anchor">#</a> Metric Help / Tooltips</h2> <p>Sometimes a metric needs to offer the user more context about how the value is calculated or other details related to it. To provide this context, Nova allows you to define a help text &quot;tooltip&quot;, which can be registered similarly to <a href="/coursewire/2.0/resources/fields.html#field-help-text">Field Help Text</a>:</p> <p><img src="img/metric-tooltip-help.png" alt="Metric Help Tooltip"></p> <p>To enable the tooltip, simply call <code>help</code> on the metric instance and pass in your desired text:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token comment">/**
 * Get the cards available for the request.
 *
 * @param  \Illuminate\Http\Request  $request
 * @return array
 */</span>
<span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">cards</span><span class="token punctuation">(</span>Request <span class="token variable">$request</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">[</span>
        <span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">TotalUsers</span><span class="token punctuation">)</span>
            <span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">help</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'This is calculated using all users that are active and not banned.'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>You may also use HTML when defining your help text:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">TotalUsers</span><span class="token punctuation">)</span>
    <span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">help</span><span class="token punctuation">(</span><span class="token function">view</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'nova.metrics.total-users.tooltip'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</code></pre></div><h2 id="authorization"><a href="#authorization" class="header-anchor">#</a> Authorization</h2> <p>If you would like to only expose a given metric to certain users, you may chain the <code>canSee</code> method onto your metric registration. The <code>canSee</code> method accepts a Closure which should return <code>true</code> or <code>false</code>. The Closure will receive the incoming HTTP request:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">use</span> <span class="token package">App<span class="token punctuation">\</span>User</span><span class="token punctuation">;</span>

<span class="token comment">/**
 * Get the cards available for the resource.
 *
 * @param  \Illuminate\Http\Request  $request
 * @return array
 */</span>
<span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">cards</span><span class="token punctuation">(</span>Request <span class="token variable">$request</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">[</span>
        <span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Metrics<span class="token punctuation">\</span>UsersPerDay</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">canSee</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token variable">$request</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token variable">$request</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">user</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">can</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'viewUsersPerDay'</span><span class="token punctuation">,</span> User<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>In the example above, we are using Laravel's <code>Authorizable</code> trait's <code>can</code> method on our <code>User</code> model to determine if the authorized user is authorized for the <code>viewUsersPerDay</code> action. However, since proxying to authorization policy methods is a common use-case for <code>canSee</code>, you may use the <code>canSeeWhen</code> method to achieve the same behavior. The <code>canSeeWhen</code> method has the same method signature as the <code>Illuminate\Foundation\Auth\Access\Authorizable</code> trait's <code>can</code> method:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">use</span> <span class="token package">App<span class="token punctuation">\</span>User</span><span class="token punctuation">;</span>

<span class="token comment">/**
 * Get the cards available for the resource.
 *
 * @param  \Illuminate\Http\Request  $request
 * @return array
 */</span>
<span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">cards</span><span class="token punctuation">(</span>Request <span class="token variable">$request</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">[</span>
        <span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Metrics<span class="token punctuation">\</span>UsersPerDay</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">canSeeWhen</span><span class="token punctuation">(</span>
            <span class="token single-quoted-string string">'viewUsersPerDay'</span><span class="token punctuation">,</span> User<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token keyword">class</span>
        <span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">11/24/2020, 11:08:49 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/coursewire/nova/metrics/defining-metrics.html" class="prev">
        Defining Metrics
      </a></span> <span class="next"><a href="/coursewire/nova/nova-js/">
        Overview
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/coursewire/assets/js/app.02511102.js" defer></script><script src="/coursewire/assets/js/2.fbd24a80.js" defer></script><script src="/coursewire/assets/js/37.52edfd39.js" defer></script>
  </body>
</html>
